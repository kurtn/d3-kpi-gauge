!function(e,t){if("function"==typeof define&&define.amd)define(["exports","d3-transition","d3-shape","d3-ease","d3-array","d3-scale","d3-selection"],t);else if("undefined"!=typeof exports)t(exports,require("d3-transition"),require("d3-shape"),require("d3-ease"),require("d3-array"),require("d3-scale"),require("d3-selection"));else{var i={};t(i,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3),e.d3SimpleGauge=i}}(this,function(e,t,o,i,h,n,s){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleGauge=void 0;var l={BAR_WIDTH:20,CHAR_INSET:10,EASE_TYPE:i.easeElastic,NEEDLE_ANIMATION_DELAY:0,NEEDLE_ANIMATION_DURATION:3e3,NEEDLE_RADIUS:15,PAD_RAD:0,KPI:25},u=function(e){return function(e){return e*Math.PI/180}(function(e){return 360*e}(e))},_=function(){function t(e){a(this,t),this._animationDelay=e.animationDelay,this._animationDuration=e.animationDuration,this._color=e.color,this._easeType=e.easeType,this._el=e.el,this._kpi=e.kpi,this._length=e.length,this._percent=e.percent,this._radius=e.radius,this._initialize()}return c(t,[{key:"update",value:function(e){var a=this;if(this._kpi/100>=e)var t="rgba(0, 172, 0, 1)";else t="rgba(172, 0, 0, 1)";this._el.select(".needle-center").style("fill",t),this._el.select(".needle").style("fill",t),this._el.transition().delay(this._animationDelay).ease(this._easeType).duration(this._animationDuration).selectAll(".needle").tween("progress",function(){var t=this,i=e-a._percent,n=a._percent;return function(e){return a._percent=n+e*i,(0,s.select)(t).attr("d",a._getPath(a._percent))}})}},{key:"_initialize",value:function(){this._el.append("circle").attr("class","needle-center").attr("cx",0).attr("cy",0).attr("r",this._radius),this._el.append("path").attr("class","needle").attr("d",this._getPath(this._percent)),this._kpi/100>=this._percent?this._color="rgba(0, 172, 0, 1)":this._color="rgba(172, 0, 0, 1)",this._color&&(this._el.select(".needle-center").style("fill",this._color),this._el.select(".needle").style("fill",this._color))}},{key:"_getPath",value:function(e){var t=Math.PI/2,i=u(e/2),n=0-this._length*Math.cos(i-.015),a=0-this._length*Math.sin(i-.015),s=0-this._length*Math.cos(i+.015),r=0-this._length*Math.sin(i+.015),o=0-this._radius*Math.cos(i-t),h=0-this._radius*Math.sin(i-t),c=0-this._radius*Math.cos(i+t),l=0-this._radius*Math.sin(i+t);return"M ".concat(o," ").concat(h," L ").concat(n," ").concat(a," L ").concat(s," ").concat(r," L ").concat(c," ").concat(l)}}]),t}(),d=function(){function t(e){if(a(this,t),!e.el)throw new Error("The element must be valid.");if(isNaN(e.height)||e.height<=0)throw new RangeError("The height must be a positive number.");if(isNaN(e.sectionsCount)||e.sectionsCount<=0)throw new RangeError("The sections count must be a positive number.");if(isNaN(e.width)||e.width<=0)throw new RangeError("The width must be a positive number.");if(void 0!==e.animationDelay&&(isNaN(e.animationDelay)||e.animationDelay<0))throw new RangeError("The transition delay must be greater or equal to 0.");if(void 0!==e.animationDuration&&(isNaN(e.animationDuration)||e.animationDuration<0))throw new RangeError("The transition duration must be greater or equal to 0.");if(void 0!==e.barWidth&&(isNaN(e.barWidth)||e.barWidth<=0))throw new RangeError("The bar width must be a positive number.");if(void 0!==e.chartInset&&(isNaN(e.chartInset)||e.chartInset<0))throw new RangeError("The chart inset must be greater or equal to 0.");if(void 0!==e.needleRadius&&(isNaN(e.needleRadius)||e.needleRadius<0))throw new RangeError("The needle radius must be greater or equal to 0.");if(void 0!==e.sectionsColors&&e.sectionsColors.length<e.sectionsCount)throw new RangeError("The sectionsColors length must match with the sectionsCount.");this._animationDelay=void 0!==e.animationDelay?e.animationDelay:l.NEEDLE_ANIMATION_DELAY,this._animationDuration=void 0!==e.animationDuration?e.animationDuration:l.NEEDLE_ANIMATION_DURATION,this._chartInset=void 0!==e.chartInset?e.chartInset:l.CHAR_INSET,this._barWidth=e.barWidth||l.BAR_WIDTH,this._easeType=e.easeType||l.EASE_TYPE,this._el=e.el,this._height=e.height,this._needleRadius=void 0!==e.needleRadius?e.needleRadius:l.NEEDLE_RADIUS,this._sectionsCount=e.sectionsCount,this._width=e.width,this._sectionsColors=e.sectionsColors,this._needleColor=e.needleColor,this._kpi=e.kpi,this.interval=e.interval||[0,1],this.percent=void 0!==e.percent?e.percent:0,this._initialize()}return c(t,[{key:"_initialize",value:function(){var n=this,a=1/this._sectionsCount/2,s=.75,r=Math.min(this._width,2*this._height)/2;this._chart=this._el.append("g").attr("transform","translate(".concat(this._width/2,", ").concat(this._height,")")),this._arcs=this._chart.selectAll(".arc").data((0,h.range)(1,this._sectionsCount+1)).enter().append("path").attr("class",function(e){return"arc chart-color".concat(e)}).attr("d",function(e){var t=u(s),i=t+u(a);s+=a;n._sectionsCount;return(0,o.arc)().outerRadius(r-n._chartInset).innerRadius(r-n._chartInset-n._barWidth).startAngle(t).endAngle(i)(n)}),this._sectionsColors&&this._arcs.style("fill",function(e){return n._sectionsColors[e-1]}),this._needle=new _({animationDelay:this._animationDelay,animationDuration:this._animationDuration,color:this._needleColor,easeType:this._easeType,el:this._chart,kpi:this._kpi,length:.9*(this._height-1.2*this._chartInset),percent:this._percent,radius:this._needleRadius}),this._update()}},{key:"_update",value:function(){var i=this;this._arcs&&(this._arcs.classed("active",function(e,t){return t===Math.floor(i._percent*i._sectionsCount)||t===i._arcs.size()-1&&1===i._percent}),this._chart.classed("min",0===this._percent),this._chart.classed("max",1===this._percent))}},{key:"interval",get:function(){return this._scale.domain()},set:function(e){if(!(e instanceof Array)||2!==e.length||isNaN(e[0])||isNaN(e[1])||e[0]>e[1])throw new Error("The interval specified is invalid.");this._scale=(0,n.scaleLinear)().domain(e).range([0,1]).clamp(!0)}},{key:"percent",get:function(){return this._percent},set:function(e){if(isNaN(e)||e<0||1<e)throw new RangeError("The percentage must be between 0 and 1.");this._needle&&this._needle.update(e),this._percent=e,this._update()}},{key:"value",set:function(e){if(isNaN(e))throw new Error("The specified value must be a number.");this.percent=this._scale(e)}}]),t}();e.SimpleGauge=d});